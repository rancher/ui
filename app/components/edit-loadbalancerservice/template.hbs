{{#liquid-if loading}}
  <div class="text-center">
    <p>
      <i class="icon icon-spinner icon-spin"></i> Loading...
    </p>
  </div>
{{else}}
  <section class="horizontal-form container-fluid">
    <h2>Edit Load Balancer</h2>
    {{top-errors errors=errors}}

    {{form-scale
      initialLabels=launchConfig.labels
      initialScale=service.scale
      isGlobal=isGlobal
      editing=true
      errors=scaleErrors
      setLabels=(action 'setLabels' 'scale')
      setGlobal=(action 'setGlobal')
      setScale=(action  'setScale')
    }}

    {{form-name-description
      model=service
      namePlaceholder="servicePage.newBalancer.form.name.placeholder"
      descriptionPlaceholder="servicePage.newBalancer.form.description.placeholder"
    }}

    {{form-balancer-listeners
      initialPorts=launchConfig.ports
      initialExpose=launchConfig.expose
      initialLabels=launchConfig.labels
      changed=(action "setListeners")
      setLabels=(action 'setLabels' 'ssl')
      editing=true
    }}


    {{form-targets
      isBalancer=true
      existing=existing
      allServices=allServices
      changed=(action "setTargets")
    }}


    {{form-ssl-termination
      balancer=service
      hasSslListeners=hasSslListeners
      launchConfig=launchConfig
      allCertificates=allCertificates
    }}


    <div class="row">
      <div class="col-sm-12 col-md-2 form-label form-control-static">
        <label>haproxy.cfg</label>
      </div>
      <div class="col-md-8">
        <p class="help-block">Additional <a href="http://cbonte.github.io/haproxy-dconv/configuration-1.5.html" target="_blank">haproxy.cfg</a> configuration can be put here and will be appended to the configuration generated by {{settings.appName}}.</p>

        <div>
          <label class="r-pt5 r-pb5"><code>global</code> section</label>
          {{textarea
            value=haproxyConfig.global
            prompt="Custom global section lines"
            rows="8"
            classNames="form-control"
          }}
        </div>
        <div>
          <label class="r-pt5 r-pb5"><code>defaults</code> section</label>
          {{textarea
            value=haproxyConfig.defaults
            prompt="Custom defaults section lines"
            rows="8"
            classNames="form-control"
          }}
        </div>
      </div>
    </div>
  </section>

  {{save-cancel save="save" cancel="cancel"}}
{{/liquid-if}}
